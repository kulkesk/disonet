# Плагины
Протокол пытается быть максимально модульным и простым для модификации пользователем.
Планируется создать систему модулей которая будет _слепа_ к использованному языку.
Не требующая написания кода на каком-то специальном скриптовом языке или компилирования кода в динамические библиотеки

## Зачем плагины?
1. Для добавления новых вариантов связи между нодами 
    * например использование других протоколов и\или железа для связи с другими нодами
2. Для добавления новых алгоритмов шифрования и хеширования
3. Для добавления новых систем хранения данных
4. Для добавления нового интерфейса взаимодействия с демоном который реализует протокол

## Возможная реализация:
В рабочей папке программы будет папка `plugins`

Каждая вложенная папка в папку `plugins` будет считаться плагином если в папке будет файл `info.plug` с примерно следующим содержимым:

### Cпецификация файла `info.plug`
```
name new_plugin
display_name New Plugin
author Вася Пупкин
license MIT
description """
Супер новый плагин для коммуникации с другими нодами
"""
type connection
communication stdin_stdout
launch_command python3 src/main.py
```
Файл `info.plug` использует синтаксис протокола.
В файле находится информация о плагине и о том как с ним работать.
Теперь разберём каждый параметр и за что он отвечает

* `name` - программное название плагина

* `display_name` - название плагина который будет демонстрироваться пользователю при запросе об списке плагинов

* `author` - имя автора

* `license` - лицензия под которой вышел плагин

* `description` - описание плагина который будет показываться пользователю

* `type` - тип плагина, говорит о том какие данные передавать плагину, и как с ним общаться  
Типы бывают:
  * `connection`: плагин с таким типом используется для коммуникации между нодами, через него проходят все данные, что бы плагин в свою очередь распространил их по известным нодам.
  * `hash`: плагин отвечает за хеширование данных
  * `encrypt-decrypt`: плагин отвечает за шифровку и дешифровку данных
  * `interface`: плагин отвечает за отображение информации пользователю, демон получает от интерфейса запросы, и отвечает на запросы интересующими данными
  * `storage`: плагин отвечает за хранение всех данных

* `communication` - связь с плагином. Связаться с плагином можно одним следующих способов:
  * `stdin_stdout`: связь через стандартный ввод и вывод, вписывая запросы в стандартный ввод, и получая ответ из стандартного вывода
  * `socket`: связь через сокет, пересылка данных на заданный порт и ip, который задаётся в этом же параметре в виде `ip:port`  
  Пример: `communication socket 127.0.0.1:42069`
  * `file`: связь производится через файлы которые появляются в подпапке `session{id процесса демона}` с плагином

* `launch_command` - команда запуска
